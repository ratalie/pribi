# ğŸ›ï¸ Arquitectura Hexagonal - Juntas de Accionistas

## ğŸ“Š Diagrama de Capas

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          PAGES (Vue)                            â”‚
â”‚                  app/pages/operaciones/.../junta-accionistas/   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PRESENTATION LAYER                           â”‚
â”‚           app/core/presentation/operaciones/junta-accionistas/  â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ SelecciÃ³n       â”‚  â”‚ Detalles        â”‚  â”‚ InstalaciÃ³n     â”‚â”‚
â”‚  â”‚ Agenda          â”‚  â”‚ Junta           â”‚  â”‚ Junta           â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚ â€¢ Stores        â”‚  â”‚ â€¢ Stores        â”‚  â”‚ â€¢ Stores        â”‚â”‚
â”‚  â”‚ â€¢ Controllers   â”‚  â”‚ â€¢ Controllers   â”‚  â”‚ â€¢ Controllers   â”‚â”‚
â”‚  â”‚ â€¢ Components    â”‚  â”‚ â€¢ Components    â”‚  â”‚ â€¢ Components    â”‚â”‚
â”‚  â”‚ â€¢ Types         â”‚  â”‚ â€¢ Types         â”‚  â”‚ â€¢ Types         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   APPLICATION LAYER                             â”‚
â”‚              app/core/hexag/juntas/application/                 â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  USE CASES (Casos de Uso)                                â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  â€¢ GetAgendaItemsUseCase                                 â”‚  â”‚
â”‚  â”‚  â€¢ UpdateAgendaItemsUseCase                              â”‚  â”‚
â”‚  â”‚  â€¢ GetMeetingDetailsUseCase                              â”‚  â”‚
â”‚  â”‚  â€¢ UpdateMeetingDetailsUseCase                           â”‚  â”‚
â”‚  â”‚  â€¢ GetAsistenciaUseCase                                  â”‚  â”‚
â”‚  â”‚  â€¢ UpdateAsistenciaUseCase                               â”‚  â”‚
â”‚  â”‚  â€¢ CreateJuntaUseCase                                    â”‚  â”‚
â”‚  â”‚  â€¢ GetSnapshotUseCase                                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  DTOs (Data Transfer Objects)                            â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  â€¢ AgendaItemDTO                                         â”‚  â”‚
â”‚  â”‚  â€¢ MeetingDetailsDTO                                     â”‚  â”‚
â”‚  â”‚  â€¢ AsistenciaDTO                                         â”‚  â”‚
â”‚  â”‚  â€¢ SnapshotCompleteDTO                                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      DOMAIN LAYER                               â”‚
â”‚                app/core/hexag/juntas/domain/                    â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ENTITIES (Entidades de Negocio)                         â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  â€¢ MeetingDetails                                        â”‚  â”‚
â”‚  â”‚  â€¢ AgendaItem                                            â”‚  â”‚
â”‚  â”‚  â€¢ Asistencia                                            â”‚  â”‚
â”‚  â”‚  â€¢ Convocatoria                                          â”‚  â”‚
â”‚  â”‚  â€¢ QuorumEstado                                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  PORTS (Contratos/Interfaces)                            â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  â€¢ JuntaRepository                                       â”‚  â”‚
â”‚  â”‚  â€¢ AgendaItemsRepository                                 â”‚  â”‚
â”‚  â”‚  â€¢ MeetingDetailsRepository                              â”‚  â”‚
â”‚  â”‚  â€¢ AsistenciaRepository                                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  CONSTANTS & ENUMS                                       â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  â€¢ PUNTOS_AGENDA (catÃ¡logo completo)                     â”‚  â”‚
â”‚  â”‚  â€¢ TipoJunta (UNIVERSAL, GENERAL)                        â”‚  â”‚
â”‚  â”‚  â€¢ TipoAcuerdo (SIMPLE, CALIFICADO)                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 INFRASTRUCTURE LAYER                            â”‚
â”‚           app/core/hexag/juntas/infrastructure/                 â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ HTTP Repository   â”‚              â”‚ MSW Repository    â”‚      â”‚
â”‚  â”‚                   â”‚              â”‚                   â”‚      â”‚
â”‚  â”‚ â€¢ $fetch          â”‚              â”‚ â€¢ Mock State      â”‚      â”‚
â”‚  â”‚ â€¢ Backend Real    â”‚              â”‚ â€¢ Sin Backend     â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚            â”‚                                  â”‚                â”‚
â”‚            â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚                â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â–¶    MAPPERS     â—€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                     â”‚                â”‚                         â”‚
â”‚                     â”‚ DTO â†” Entity   â”‚                         â”‚
â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  MSW HANDLERS & STATE                                    â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  â€¢ junta.handlers.ts                                     â”‚  â”‚
â”‚  â”‚  â€¢ agenda-items.handlers.ts                              â”‚  â”‚
â”‚  â”‚  â€¢ meeting-details.handlers.ts                           â”‚  â”‚
â”‚  â”‚  â€¢ asistencia.handlers.ts                                â”‚  â”‚
â”‚  â”‚  â€¢ snapshot.handlers.ts                                  â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  â€¢ Estado en memoria (Map<id, entity>)                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   BACKEND REAL    â”‚           â”‚    MSW (Mock)       â”‚
â”‚                   â”‚           â”‚                     â”‚
â”‚  localhost:3000   â”‚           â”‚  En Memoria         â”‚
â”‚  /api/v2/...      â”‚           â”‚  Instant Response   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”‘ Principios Clave

### 1. **InversiÃ³n de Dependencias**

El **Domain** no conoce Infrastructure:

```typescript
// âœ… CORRECTO: Use Case depende del PORT (abstracciÃ³n)
export class GetJuntaUseCase {
  constructor(private readonly repository: JuntaRepository) {} // â† PORT
  
  async execute(id: string) {
    return this.repository.get(id); // No sabe si es HTTP o MSW
  }
}
```

### 2. **Separation of Concerns**

Cada capa tiene UNA responsabilidad:

- **Domain**: Reglas de negocio
- **Application**: OrquestaciÃ³n
- **Infrastructure**: Detalles tÃ©cnicos (HTTP, DB, MSW)
- **Presentation**: UI y experiencia de usuario

### 3. **Testability**

Cada capa se testea independientemente:

```typescript
// Test del Use Case (sin HTTP, sin MSW)
it('should return junta', async () => {
  const mockRepo = {
    get: vi.fn().mockResolvedValue({ id: '1' })
  };
  
  const useCase = new GetJuntaUseCase(mockRepo);
  const result = await useCase.execute('1');
  
  expect(result.id).toBe('1');
});
```

---

## ğŸš€ Ventajas

### âœ… Mantenibilidad
- CÃ³digo organizado y predecible
- FÃ¡cil encontrar dÃ³nde estÃ¡ cada cosa
- Cambios aislados (no rompes todo)

### âœ… Escalabilidad
- Agregar nuevos pasos es trivial
- Reutilizar use cases entre pasos
- CÃ³digo DRY (Don't Repeat Yourself)

### âœ… Testabilidad
- Tests rÃ¡pidos (sin backend)
- Tests confiables (con backend)
- Tests independientes por capa

### âœ… Flexibilidad
- Cambiar de backend fÃ¡cilmente
- Agregar cacheo sin tocar UI
- Migrar a GraphQL sin romper nada

### âœ… Onboarding
- Nuevos devs entienden rÃ¡pido
- Estructura consistente
- DocumentaciÃ³n clara

---

## ğŸ“– Ejemplo Completo

Ver: `docs/00_meta/architecture/JUNTAS-EJEMPLO-COMPLETO.md`

---

**Ãšltima actualizaciÃ³n**: Diciembre 4, 2024

