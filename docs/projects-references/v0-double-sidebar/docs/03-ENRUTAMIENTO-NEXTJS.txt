===============================================================================
                         ENRUTAMIENTO EN NEXT.JS APP ROUTER
===============================================================================

CONCEPTO: APP ROUTER
--------------------
Next.js 13+ introduce el App Router, un nuevo sistema de enrutamiento basado
en el sistema de archivos que reemplaza al Pages Router anterior.

CARACTERÍSTICAS:
- File-based routing
- Layouts anidados
- Server Components por defecto
- Loading y error states
- Route Groups
- Parallel Routes
- Intercepting Routes


ESTRUCTURA DE ENRUTAMIENTO DEL PROYECTO
----------------------------------------

RUTA RAÍZ:
app/
├── layout.tsx          → Layout global (HTML, body, fonts)
└── page.tsx            → Página raíz "/" (redirect)

ROUTE GROUP (docs):
app/(docs)/             → Grupo que NO afecta la URL
├── layout.tsx          → Envuelve todas las páginas en DocsLayout
└── [páginas...]        → Todas heredan el layout


MAPEO DE ARCHIVOS A RUTAS
--------------------------

ARCHIVO                                          → RUTA URL
--------------------------------------------------------------------------------
app/page.tsx                                     → /
app/(docs)/seleccion-junta/page.tsx             → /seleccion-junta
app/(docs)/datos-junta/page.tsx                 → /datos-junta
app/(docs)/instalacion-junta/page.tsx           → /instalacion-junta
app/(docs)/puntos-agenda/aumento-capital-aporte/page.tsx
                                                 → /puntos-agenda/aumento-capital-aporte
app/(docs)/puntos-agenda/aumento-capital-aporte/aportantes/page.tsx
                                                 → /puntos-agenda/aumento-capital-aporte/aportantes
app/(docs)/puntos-agenda/aumento-capital-aporte/aportes/page.tsx
                                                 → /puntos-agenda/aumento-capital-aporte/aportes
app/(docs)/puntos-agenda/aumento-capital-aporte/votacion/page.tsx
                                                 → /puntos-agenda/aumento-capital-aporte/votacion
app/(docs)/puntos-agenda/aumento-capital-capitalizacion/page.tsx
                                                 → /puntos-agenda/aumento-capital-capitalizacion
app/(docs)/puntos-agenda/aumento-capital-capitalizacion/acreedores/page.tsx
                                                 → /puntos-agenda/aumento-capital-capitalizacion/acreedores
app/(docs)/puntos-agenda/aumento-capital-capitalizacion/aportantes/page.tsx
                                                 → /puntos-agenda/aumento-capital-capitalizacion/aportantes
app/(docs)/puntos-agenda/aumento-capital-capitalizacion/aportes/page.tsx
                                                 → /puntos-agenda/aumento-capital-capitalizacion/aportes
app/(docs)/puntos-agenda/aumento-capital-capitalizacion/capitalizacion/page.tsx
                                                 → /puntos-agenda/aumento-capital-capitalizacion/capitalizacion
app/(docs)/puntos-agenda/aumento-capital-capitalizacion/votacion/page.tsx
                                                 → /puntos-agenda/aumento-capital-capitalizacion/votacion
app/(docs)/puntos-agenda/nombramiento-gerente/page.tsx
                                                 → /puntos-agenda/nombramiento-gerente
app/(docs)/puntos-agenda/nombramiento-gerente/nombramiento/page.tsx
                                                 → /puntos-agenda/nombramiento-gerente/nombramiento
app/(docs)/puntos-agenda/nombramiento-gerente/otorgamiento/page.tsx
                                                 → /puntos-agenda/nombramiento-gerente/otorgamiento
app/(docs)/puntos-agenda/nombramiento-gerente/votacion/page.tsx
                                                 → /puntos-agenda/nombramiento-gerente/votacion
app/(docs)/puntos-agenda/nombramiento-apoderados/page.tsx
                                                 → /puntos-agenda/nombramiento-apoderados
app/(docs)/puntos-agenda/nombramiento-apoderados/nombramiento/page.tsx
                                                 → /puntos-agenda/nombramiento-apoderados/nombramiento
app/(docs)/puntos-agenda/nombramiento-apoderados/otorgamiento/page.tsx
                                                 → /puntos-agenda/nombramiento-apoderados/otorgamiento
app/(docs)/puntos-agenda/nombramiento-apoderados/votacion/page.tsx
                                                 → /puntos-agenda/nombramiento-apoderados/votacion
app/(docs)/puntos-agenda/remocion-apoderados/page.tsx
                                                 → /puntos-agenda/remocion-apoderados
app/(docs)/puntos-agenda/remocion-apoderados/remocion/page.tsx
                                                 → /puntos-agenda/remocion-apoderados/remocion
app/(docs)/puntos-agenda/remocion-apoderados/votacion/page.tsx
                                                 → /puntos-agenda/remocion-apoderados/votacion
app/(docs)/puntos-agenda/remocion-directores/page.tsx
                                                 → /puntos-agenda/remocion-directores
app/(docs)/puntos-agenda/remocion-directores/remocion/page.tsx
                                                 → /puntos-agenda/remocion-directores/remocion
app/(docs)/puntos-agenda/remocion-directores/votacion/page.tsx
                                                 → /puntos-agenda/remocion-directores/votacion
app/(docs)/resumen/page.tsx                      → /resumen
app/(docs)/descargar/page.tsx                    → /descargar


ROUTE GROUPS
------------

¿QUÉ SON?
Carpetas entre paréntesis que organizan rutas sin afectar la URL.

SINTAXIS:
app/(nombre)/

EJEMPLO EN EL PROYECTO:
app/(docs)/               ← NO aparece en la URL
  └── datos-junta/
      └── page.tsx        → URL: /datos-junta (no /docs/datos-junta)

PROPÓSITO:
- Organizar rutas lógicamente
- Aplicar layouts compartidos
- No afectar la estructura de URLs


LAYOUTS ANIDADOS
----------------

JERARQUÍA DE LAYOUTS EN EL PROYECTO:

1. ROOT LAYOUT (app/layout.tsx):
   - Envuelve toda la aplicación
   - Define <html> y <body>
   - Carga fuentes globales
   - Agrega Analytics

2. DOCS LAYOUT (app/(docs)/layout.tsx):
   - Envuelve todas las páginas de documentación
   - Renderiza DocsLayout component
   - Proporciona navegación y estructura

3. PAGE CONTENT:
   - Contenido específico de cada página
   - Se inyecta como {children}


CÓDIGO DEL ROOT LAYOUT:
------------------------
```typescript
// app/layout.tsx
import type { Metadata } from 'next'
import { Geist, Geist_Mono } from 'next/font/google'
import { Analytics } from '@vercel/analytics/next'
import './globals.css'

const _geist = Geist({ subsets: ["latin"] })
const _geistMono = Geist_Mono({ subsets: ["latin"] })

export const metadata: Metadata = {
  title: 'v0 App',
  description: 'Created with v0',
  generator: 'v0.app',
}

export default function RootLayout({
  children,
}: Readonly<{ children: React.ReactNode }>) {
  return (
    <html lang="en">
      <body className={`font-sans antialiased`}>
        {children}
        <Analytics />
      </body>
    </html>
  )
}
```

CARACTERÍSTICAS:
- Metadata para SEO
- Carga de fuentes de Google
- Clases globales en body
- Analytics de Vercel


CÓDIGO DEL DOCS LAYOUT:
------------------------
```typescript
// app/(docs)/layout.tsx
import type React from "react"
import { DocsLayout } from "@/components/docs-layout"

export default function DocsLayoutWrapper({
  children,
}: {
  children: React.ReactNode
}) {
  return <DocsLayout>{children}</DocsLayout>
}
```

CARACTERÍSTICAS:
- Wrapper simple
- Delega al componente DocsLayout
- Todas las páginas heredan este layout


REDIRECCIONES
-------------

PÁGINA RAÍZ (app/page.tsx):
```typescript
import { redirect } from "next/navigation"

export default function HomePage() {
  redirect("/seleccion-junta")
}
```

COMPORTAMIENTO:
- Usuario visita "/"
- Next.js ejecuta el componente
- redirect() hace una redirección 307
- Usuario termina en "/seleccion-junta"

TIPO DE REDIRECT:
- Server-side redirect
- No hay flash de contenido
- SEO-friendly


CONFIGURACIÓN DE NAVEGACIÓN
----------------------------

UBICACIÓN: lib/navigation-config.ts

ESTRUCTURA:
```typescript
export interface NavItem {
  title: string
  href?: string
  isRoute?: boolean
  items?: NavItem[]
}

export const navigationStructure: NavItem[] = [...]
```

NAVEGACIÓN JERÁRQUICA:
- Nivel 1: Links directos
- Nivel 2: Secciones con sub-items
- Cada item tiene título y href
- isRoute marca si es una ruta navegable

EJEMPLO:
```typescript
{
  title: "Puntos de Agenda",
  items: [
    {
      title: "Aumento de Capital por Aporte Dinerario",
      href: "/puntos-agenda/aumento-capital-aporte/aportantes",
      isRoute: true,
    },
    // ...más items
  ],
}
```


TABLA DE CONTENIDOS POR RUTA
-----------------------------

CONFIGURACIÓN: tocByRoute en navigation-config.ts

ESTRUCTURA:
```typescript
export const tocByRoute: Record<string, NavItem[]> = {
  "/datos-junta": [
    { title: "Tipo de Junta", href: "#tipo-junta" },
    { title: "Modo de Realización", href: "#modo-realizacion" },
    // ...
  ],
  "/instalacion-junta": [
    { title: "Convocatoria Ejercida", href: "#convocatoria-ejercida" },
    // ...
  ],
  // ...
}
```

FUNCIONAMIENTO:
1. Usuario navega a una ruta
2. TableOfContents obtiene pathname
3. Busca en tocByRoute[pathname]
4. Renderiza links correspondientes


TIPOS DE ENLACES EN ToC:

1. SCROLL ANCHORS (#):
   - Links a secciones en la misma página
   - href="#section-id"
   - Usa scrollIntoView()

2. ROUTE LINKS:
   - Links a otras páginas
   - href="/ruta/completa"
   - isRoute: true
   - Usa Next.js Link


NAVEGACIÓN CLIENT-SIDE
-----------------------

COMPONENTE: MainSidebar

HOOKS UTILIZADOS:
```typescript
import { usePathname } from "next/navigation"

const pathname = usePathname()
```

DETECCIÓN DE RUTA ACTIVA:
```typescript
const isActive = (href?: string) => {
  if (!href) return false
  return pathname === href || pathname.startsWith(href + "/")
}
```

LÓGICA:
- Ruta exacta: pathname === href
- Ruta anidada: pathname.startsWith(href + "/")


NEXT.JS LINK COMPONENT
----------------------

USO EN EL PROYECTO:
```typescript
import Link from "next/link"

<Link
  href="/ruta"
  className="..."
>
  Texto del link
</Link>
```

CARACTERÍSTICAS:
- Navegación client-side (no recarga página)
- Prefetching automático
- Scroll to top automático
- Mantiene estado de React


RUTAS DINÁMICAS
----------------

NO USADAS EN EL PROYECTO

SINTAXIS (para referencia):
- [id]/page.tsx → /cualquier-id
- [...slug]/page.tsx → /multi/nivel/ruta
- [[...slug]]/page.tsx → opcional catch-all


RUTAS PARALELAS
---------------

NO USADAS EN EL PROYECTO

SINTAXIS (para referencia):
- @modal/page.tsx
- @sidebar/page.tsx


RUTAS INTERCEPTADAS
-------------------

NO USADAS EN EL PROYECTO

SINTAXIS (para referencia):
- (.)folder → mismo nivel
- (..)folder → nivel superior
- (..)(..)folder → dos niveles arriba


METADATA Y SEO
--------------

METADATA ESTÁTICA:
```typescript
export const metadata: Metadata = {
  title: 'v0 App',
  description: 'Created with v0',
  generator: 'v0.app',
}
```

METADATA DINÁMICA:
No implementada en el proyecto

EJEMPLO (para referencia):
```typescript
export async function generateMetadata({ params }): Promise<Metadata> {
  return {
    title: `Página ${params.id}`,
  }
}
```


LOADING STATES
--------------

NO IMPLEMENTADOS

SINTAXIS (para referencia):
- loading.tsx en cualquier carpeta
- Renderiza automáticamente mientras carga


ERROR HANDLING
--------------

NO IMPLEMENTADO

SINTAXIS (para referencia):
- error.tsx en cualquier carpeta
- Renderiza cuando hay error
- Debe ser Client Component


NOT FOUND
---------

NO IMPLEMENTADO

SINTAXIS (para referencia):
- not-found.tsx
- Renderiza en 404


MIDDLEWARE
----------

NO IMPLEMENTADO

UBICACIÓN (si existiera):
- middleware.ts en la raíz

USOS COMUNES:
- Autenticación
- Redirects condicionales
- Headers personalizados
- Reescritura de URLs


RESUMEN DE RUTAS
----------------

TOTAL DE PÁGINAS: 32 páginas .tsx

NIVELES DE PROFUNDIDAD:
- Nivel 1: 6 páginas (/, seleccion-junta, datos-junta, etc.)
- Nivel 2: 6 páginas (puntos-agenda/[tipo])
- Nivel 3: 20 páginas (subrutas de puntos-agenda)

PATRÓN COMÚN:
/puntos-agenda/[tipo]/[sub-seccion]

EJEMPLO:
/puntos-agenda/nombramiento-gerente/nombramiento
/puntos-agenda/nombramiento-gerente/otorgamiento
/puntos-agenda/nombramiento-gerente/votacion


===============================================================================
